if [[ -z $ZPROFILE_SOURCED ]]; then
    source ~/.zprofile
fi

export GPG_TTY=$(tty)
export VISUAL="nvim"
export CLICOLOR=1

alias ls="ls --color=auto"
alias ll="ls -l"
alias macos_fix_keyboard="sudo killall -9 PAH_Extension TextInputMenuAgent TextInputSwitcher"
alias macos_show_login_items="sudo sfltool dumpbtm"
alias brew86="arch -x86_64 /usr/local/bin/brew"
alias allow="direnv allow"

alias gdiff="git difftool --no-symlinks --dir-diff"
alias gs="git status -sb"
alias gd="git diff"
alias gb="git branch"

alias docker-vm-shell="docker run -it --rm --privileged --pid=host justincormack/nsenter1"

bindkey -e

source ~/dotfiles/zsh/lib/iterm.zsh
source ~/dotfiles/zsh/lib/update.zsh
source ~/dotfiles/zsh/lib/wsl.zsh

if type brew &>/dev/null; then
  FPATH=$(brew --prefix)/share/zsh/site-functions:$FPATH
  autoload -Uz compinit
  compinit
fi

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
export FZF_DEFAULT_COMMAND='rg --files'

# >>> conda initialize >>>
# !! Contents within this block are managed by 'conda init' !!
__conda_setup="$("$HOME/mambaforge/bin/conda" 'shell.zsh' 'hook' 2> /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "$HOME/mambaforge/etc/profile.d/conda.sh" ]; then
        . "$HOME/mambaforge/etc/profile.d/conda.sh"
    else
        export PATH="$HOME/mambaforge/bin:$PATH"
    fi
fi
unset __conda_setup
# <<< conda initialize <<<

if type starship &>/dev/null; then
  eval "$(starship init zsh)"
fi

if type direnv &>/dev/null; then
  eval "$(direnv hook zsh)"
fi

if type zoxide &>/dev/null; then
  eval "$(zoxide init zsh)"
fi

[[ -f ~/.config/tabtab/zsh/__tabtab.zsh ]] && . ~/.config/tabtab/zsh/__tabtab.zsh || true
